# Cloudflare Pages éƒ¨ç½²æ£€æŸ¥æ¸…å•

## âœ… éƒ¨ç½²å‰æ£€æŸ¥

### 1. æ„å»ºé…ç½®
- [x] `package.json` ä¸­æœ‰æ­£ç¡®çš„æ„å»ºå‘½ä»¤ï¼š`npm run build`
- [x] æ„å»ºè„šæœ¬åŒ…å« `copy-functions` æ­¥éª¤ï¼Œç¡®ä¿ `functions/` ç›®å½•è¢«å¤åˆ¶åˆ° `dist/`
- [x] Vite é…ç½®æ­£ç¡®ï¼Œè¾“å‡ºç›®å½•ä¸º `dist/`

### 2. Functions é…ç½®
- [x] `functions/_middleware.js` å·²å®ç°ï¼Œç”¨äºå¤„ç† SPA è·¯ç”±
- [x] Middleware æ­£ç¡®å¤„ç†é™æ€èµ„æºè¯·æ±‚
- [x] Middleware æ­£ç¡®å¤„ç† 404 å¹¶é‡å®šå‘åˆ° `index.html`ï¼ˆç”¨äº SPA è·¯ç”±ï¼‰
- [x] æ„å»ºè„šæœ¬ä¼šè‡ªåŠ¨å°† `functions/` å¤åˆ¶åˆ° `dist/functions/`

### 3. é™æ€èµ„æº
- [x] `public/` ç›®å½•åŒ…å«å¿…è¦çš„é™æ€èµ„æºï¼ˆå¦‚ logoï¼‰
- [x] `index.html` é…ç½®æ­£ç¡®

### 4. Cloudflare Pages é…ç½®

#### åœ¨ Cloudflare Dashboard ä¸­é…ç½®ï¼š

1. **æ„å»ºè®¾ç½®**
   - **æ„å»ºå‘½ä»¤**: `npm run build`
   - **æ„å»ºè¾“å‡ºç›®å½•**: `dist`
   - **Node.js ç‰ˆæœ¬**: 18.x æˆ–æ›´é«˜

2. **ç¯å¢ƒå˜é‡**ï¼ˆå¦‚éœ€è¦ï¼‰
   - é€šå¸¸ä¸éœ€è¦ç¯å¢ƒå˜é‡ï¼ˆä½¿ç”¨ localStorageï¼‰

3. **Functions è®¾ç½®**
   - Cloudflare Pages ä¼šè‡ªåŠ¨æ£€æµ‹ `dist/functions/` ç›®å½•
   - ç¡®ä¿ `_middleware.js` åœ¨ `dist/functions/` ä¸­

4. **é‡å®šå‘è§„åˆ™**ï¼ˆå¯é€‰ï¼ŒMiddleware å·²å¤„ç†ï¼‰
   - å¦‚æœä½¿ç”¨ Dashboard é…ç½®ï¼Œå¯ä»¥è®¾ç½®ï¼š
     - è§„åˆ™ï¼š`/*` â†’ `/index.html` (çŠ¶æ€ç : 200)
   - ä½†å»ºè®®ä½¿ç”¨ Middlewareï¼Œå› ä¸ºå®ƒæ›´çµæ´»

### 5. éƒ¨ç½²æ­¥éª¤

1. **è¿æ¥åˆ° Git ä»“åº“**
   - åœ¨ Cloudflare Pages ä¸­è¿æ¥åˆ° GitHub/GitLab ä»“åº“
   - é€‰æ‹©åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ `main` æˆ– `master`ï¼‰

2. **é…ç½®æ„å»º**
   - æ„å»ºå‘½ä»¤: `npm run build`
   - è¾“å‡ºç›®å½•: `dist`
   - æ ¹ç›®å½•: `/`ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰

3. **éƒ¨ç½²**
   - æ¨é€ä»£ç åˆ° Git ä»“åº“
   - Cloudflare Pages ä¼šè‡ªåŠ¨è§¦å‘æ„å»ºå’Œéƒ¨ç½²

### 6. éªŒè¯éƒ¨ç½²

éƒ¨ç½²åæ£€æŸ¥ï¼š

- [ ] ç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] é™æ€èµ„æºï¼ˆJSã€CSSã€å›¾ç‰‡ï¼‰æ­£å¸¸åŠ è½½
- [ ] SPA è·¯ç”±æ­£å¸¸å·¥ä½œï¼ˆåˆ·æ–°é¡µé¢ä¸ä¼š 404ï¼‰
- [ ] Middleware æ­£ç¡®å¤„ç†é™æ€èµ„æºè¯·æ±‚
- [ ] æ²¡æœ‰ MIME ç±»å‹é”™è¯¯

### 7. å¸¸è§é—®é¢˜

#### é—®é¢˜ï¼šJS æ–‡ä»¶è¿”å› HTMLï¼ˆMIME ç±»å‹é”™è¯¯ï¼‰
**è§£å†³æ–¹æ¡ˆ**: Middleware å·²å®ç°ï¼Œç¡®ä¿é™æ€èµ„æºè¯·æ±‚ä¸ä¼šè¿”å› HTML

#### é—®é¢˜ï¼šåˆ·æ–°é¡µé¢å‡ºç° 404
**è§£å†³æ–¹æ¡ˆ**: Middleware ä¼šå°† 404 çš„ HTML è¯·æ±‚é‡å®šå‘åˆ° `index.html`

#### é—®é¢˜ï¼šFunctions æœªéƒ¨ç½²
**è§£å†³æ–¹æ¡ˆ**: 
- ç¡®ä¿ `scripts/copy-functions.js` æ­£å¸¸è¿è¡Œ
- æ£€æŸ¥ `dist/functions/_middleware.js` æ˜¯å¦å­˜åœ¨
- åœ¨ Cloudflare Dashboard ä¸­æ£€æŸ¥ Functions æ ‡ç­¾é¡µ

#### é—®é¢˜ï¼šæ„å»ºå¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼ˆéœ€è¦ 18.x æˆ–æ›´é«˜ï¼‰
- æ£€æŸ¥ `package-lock.json` æ˜¯å¦å·²æäº¤
- æ£€æŸ¥æ„å»ºæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

## ğŸ“ éƒ¨ç½²å‘½ä»¤å‚è€ƒ

```bash
# æœ¬åœ°æ„å»ºæµ‹è¯•
npm run build

# æ£€æŸ¥ dist ç›®å½•ç»“æ„
ls -la dist/
ls -la dist/functions/

# æœ¬åœ°é¢„è§ˆï¼ˆæµ‹è¯•æ„å»ºç»“æœï¼‰
npm run preview
```

## ğŸ”— ç›¸å…³æ–‡ä»¶

- `functions/_middleware.js` - Cloudflare Pages Middleware
- `scripts/copy-functions.js` - æ„å»ºæ—¶å¤åˆ¶ Functions çš„è„šæœ¬
- `package.json` - æ„å»ºé…ç½®
- `vite.config.ts` - Vite æ„å»ºé…ç½®

