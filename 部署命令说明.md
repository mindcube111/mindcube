# ğŸš€ éƒ¨ç½²å‘½ä»¤ä½¿ç”¨è¯´æ˜

## ğŸ“‹ å¿«é€Ÿå¼€å§‹

### Windows ç³»ç»Ÿï¼ˆæ¨èï¼‰

#### æ–¹å¼ä¸€ï¼šåŒå‡»è¿è¡Œï¼ˆæœ€ç®€å•ï¼‰
```
åŒå‡»è¿è¡Œ deploy.bat
```

#### æ–¹å¼äºŒï¼šPowerShell è„šæœ¬
```powershell
.\scripts\deploy.ps1
```

æˆ–ä½¿ç”¨ npm å‘½ä»¤ï¼š
```powershell
npm run deploy:ps1
```

#### æ–¹å¼ä¸‰ï¼šNode.js è„šæœ¬ï¼ˆè·¨å¹³å°ï¼‰
```bash
npm run deploy
```

### Linux/Mac ç³»ç»Ÿ

```bash
npm run deploy
```

## ğŸ“¦ å¯ç”¨çš„éƒ¨ç½²å‘½ä»¤

### 1. å®Œæ•´éƒ¨ç½²æµç¨‹ï¼ˆæ¨èï¼‰

**Windows PowerShell:**
```powershell
.\scripts\deploy.ps1
```

**Node.jsï¼ˆè·¨å¹³å°ï¼‰:**
```bash
npm run deploy
```

**åŠŸèƒ½ï¼š**
- âœ… æ£€æŸ¥ Node.js ç¯å¢ƒ
- âœ… æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–
- âœ… æ¸…ç†æ—§æ„å»º
- âœ… æ„å»ºé¡¹ç›®
- âœ… éªŒè¯æ„å»ºäº§ç‰©
- âœ… æ£€æŸ¥ Wrangler CLI
- âœ… æä¾›éƒ¨ç½²é€‰é¡¹ï¼ˆè‡ªåŠ¨/æ‰‹åŠ¨ï¼‰

### 2. ä»…æ„å»ºé¡¹ç›®

```bash
npm run deploy:build
```

æˆ–

```bash
npm run build
```

**åŠŸèƒ½ï¼š**
- âœ… æ„å»ºé¡¹ç›®åˆ° `dist` ç›®å½•
- âœ… å¤åˆ¶ Functions æ–‡ä»¶

### 3. å¿«é€Ÿéƒ¨ç½²ï¼ˆéœ€è¦å·²å®‰è£… Wranglerï¼‰

```bash
npm run deploy:quick
```

**åŠŸèƒ½ï¼š**
- âœ… æ„å»ºé¡¹ç›®
- âœ… ç›´æ¥éƒ¨ç½²åˆ° Cloudflare Pages

**å‰ææ¡ä»¶ï¼š**
- å·²å®‰è£… Wrangler CLI
- å·²ç™»å½• Cloudflare

### 4. ä½¿ç”¨ Wrangler CLI æ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. æ„å»ºé¡¹ç›®
npm run build

# 2. éƒ¨ç½²
wrangler pages deploy dist --project-name=psychological-assessment-platform
```

## ğŸ¯ éƒ¨ç½²æµç¨‹è¯´æ˜

### æ­¥éª¤ 1: ç¯å¢ƒæ£€æŸ¥
- æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼ˆæ¨è 16+ï¼‰
- æ£€æŸ¥ä¾èµ–æ˜¯å¦å®‰è£…

### æ­¥éª¤ 2: ä¾èµ–å®‰è£…
- å¦‚æœ `node_modules` ä¸å­˜åœ¨ï¼Œè‡ªåŠ¨å®‰è£…ä¾èµ–

### æ­¥éª¤ 3: æ¸…ç†æ„å»º
- åˆ é™¤æ—§çš„ `dist` ç›®å½•

### æ­¥éª¤ 4: æ„å»ºé¡¹ç›®
- è¿è¡Œ `vite build`
- å¤åˆ¶ Functions æ–‡ä»¶åˆ° `dist/functions`

### æ­¥éª¤ 5: éªŒè¯æ„å»ºäº§ç‰©
- æ£€æŸ¥å¿…éœ€æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š
  - `dist/index.html`
  - `dist/functions/_middleware.js`
  - `dist/functions/api/[[path]].js`
  - `dist/assets/` ç›®å½•

### æ­¥éª¤ 6: æ£€æŸ¥ Wrangler
- æ£€æŸ¥ Wrangler CLI æ˜¯å¦å®‰è£…
- å¦‚æœæœªå®‰è£…ï¼Œå¯é€‰æ‹©è‡ªåŠ¨å®‰è£…

### æ­¥éª¤ 7: éƒ¨ç½²é€‰é¡¹
æä¾›ä¸‰ç§éƒ¨ç½²æ–¹å¼ï¼š

1. **Wrangler CLI è‡ªåŠ¨éƒ¨ç½²**ï¼ˆæ¨èï¼‰
   - è‡ªåŠ¨ç™»å½•ï¼ˆå¦‚éœ€è¦ï¼‰
   - ç›´æ¥éƒ¨ç½²åˆ° Cloudflare Pages
   - æ˜¾ç¤ºéƒ¨ç½²åçš„ç½‘ç«™åœ°å€

2. **Cloudflare Dashboard æ‰‹åŠ¨éƒ¨ç½²**
   - æ˜¾ç¤ºæ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤
   - æä¾› `dist` ç›®å½•ä½ç½®

3. **ä»…æ„å»ºï¼Œç¨åéƒ¨ç½²**
   - ä»…å®Œæˆæ„å»ºï¼Œä¸éƒ¨ç½²
   - ç¨åæ‰‹åŠ¨éƒ¨ç½²

## ğŸ”§ éƒ¨ç½²å‰å‡†å¤‡

### å¿…éœ€å·¥å…·

1. **Node.js 16+**
   - ä¸‹è½½åœ°å€: https://nodejs.org/
   - æ£€æŸ¥ç‰ˆæœ¬: `node --version`

2. **npm**
   - é€šå¸¸éš Node.js ä¸€èµ·å®‰è£…
   - æ£€æŸ¥ç‰ˆæœ¬: `npm --version`

3. **Wrangler CLI**ï¼ˆå¯é€‰ï¼Œç”¨äº CLI éƒ¨ç½²ï¼‰
   - å®‰è£…: `npm install -g wrangler`
   - ç™»å½•: `wrangler login`

### ç¯å¢ƒå˜é‡ï¼ˆå¦‚éœ€è¦ï¼‰

å¦‚æœé¡¹ç›®éœ€è¦ç¯å¢ƒå˜é‡ï¼Œè¯·åœ¨ Cloudflare Dashboard ä¸­é…ç½®ï¼š
1. è¿›å…¥ Pages é¡¹ç›®è®¾ç½®
2. é€‰æ‹© "Environment variables"
3. æ·»åŠ æ‰€éœ€çš„å˜é‡

## ğŸ“ éƒ¨ç½²åéªŒè¯

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ä»¥ä¸‹åœ°å€éªŒè¯ï¼š

- **ç½‘ç«™åœ°å€**: `https://psychological-assessment-platform.pages.dev`
- **API æµ‹è¯•**: `https://psychological-assessment-platform.pages.dev/api/questionnaires/available`

## ğŸ› ï¸ å¸¸è§é—®é¢˜

### Q1: æ„å»ºå¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®ä¿æ‰€æœ‰ä¾èµ–å·²å®‰è£…: `npm install`
2. æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼ˆæ¨è 18+ï¼‰
3. æŸ¥çœ‹æ„å»ºé”™è¯¯ä¿¡æ¯å¹¶ä¿®å¤
4. æ¸…ç†åé‡æ–°æ„å»º: `rm -rf dist node_modules && npm install && npm run build`

### Q2: Wrangler æœªå®‰è£…æ€ä¹ˆåŠï¼Ÿ

**è§£å†³æ–¹æ¡ˆï¼š**
1. è¿è¡Œéƒ¨ç½²è„šæœ¬æ—¶ä¼šæç¤ºå®‰è£…
2. æˆ–æ‰‹åŠ¨å®‰è£…: `npm install -g wrangler`
3. æˆ–ä½¿ç”¨ Cloudflare Dashboard æ‰‹åŠ¨éƒ¨ç½²

### Q3: Functions ä¸å·¥ä½œï¼Ÿ

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®è®¤ `dist/functions` ç›®å½•å­˜åœ¨
2. æ£€æŸ¥æ„å»ºè„šæœ¬æ˜¯å¦åŒ…å« `copy-functions`
3. åœ¨ Cloudflare Dashboard ä¸­æŸ¥çœ‹ Functions çŠ¶æ€
4. æ£€æŸ¥ `dist/functions/api/[[path]].js` æ˜¯å¦å­˜åœ¨

### Q4: éƒ¨ç½²åç½‘ç«™æ˜¾ç¤º 404ï¼Ÿ

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç­‰å¾… 2-5 åˆ†é’Ÿè®©åŸŸåç”Ÿæ•ˆ
2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
3. æ£€æŸ¥ Cloudflare Dashboard ä¸­çš„éƒ¨ç½²çŠ¶æ€
4. æŸ¥çœ‹æ„å»ºæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

### Q5: API è·¯ç”±è¿”å› 404ï¼Ÿ

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®è®¤ `dist/functions/api/[[path]].js` å­˜åœ¨
2. æ£€æŸ¥ API è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼ˆåº”è¯¥æ˜¯ `/api/...`ï¼‰
3. æŸ¥çœ‹ Cloudflare Workers æ—¥å¿—
4. ç¡®è®¤ Functions å·²æ­£ç¡®éƒ¨ç½²

## ğŸ”„ æ›´æ–°éƒ¨ç½²

æ¯æ¬¡ä»£ç æ›´æ–°åï¼Œé‡æ–°è¿è¡Œéƒ¨ç½²å‘½ä»¤ï¼š

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨å®Œæ•´éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰
npm run deploy

# æ–¹å¼äºŒï¼šå¿«é€Ÿéƒ¨ç½²ï¼ˆéœ€è¦å·²å®‰è£… Wranglerï¼‰
npm run deploy:quick

# æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨éƒ¨ç½²
npm run build
wrangler pages deploy dist --project-name=psychological-assessment-platform
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å®Œæ•´éƒ¨ç½²æŒ‡å—](éƒ¨ç½²æŒ‡å—.md)
- [å¿«é€Ÿéƒ¨ç½²æŒ‡å—](å¿«é€Ÿéƒ¨ç½².md)
- [Cloudflare Pages æ–‡æ¡£](https://developers.cloudflare.com/pages/)
- [Cloudflare Workers æ–‡æ¡£](https://developers.cloudflare.com/workers/)

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰è¯·ç¡®è®¤ï¼š

- [ ] Node.js 16+ å·²å®‰è£…
- [ ] ä¾èµ–å·²å®‰è£… (`npm install`)
- [ ] é¡¹ç›®å¯ä»¥æœ¬åœ°æ„å»º (`npm run build`)
- [ ] `dist/functions` ç›®å½•å­˜åœ¨ä¸”æœ‰å†…å®¹
- [ ] æ‰€æœ‰ç¯å¢ƒå˜é‡å·²é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] Wrangler CLI å·²å®‰è£…ï¼ˆå¦‚ä½¿ç”¨ CLI éƒ¨ç½²ï¼‰
- [ ] å·²ç™»å½• Cloudflareï¼ˆå¦‚ä½¿ç”¨ CLI éƒ¨ç½²ï¼‰

---

**æç¤ºï¼š** é¦–æ¬¡éƒ¨ç½²å»ºè®®ä½¿ç”¨å®Œæ•´éƒ¨ç½²è„šæœ¬ (`npm run deploy`)ï¼Œå®ƒä¼šè‡ªåŠ¨æ£€æŸ¥æ‰€æœ‰å‰ç½®æ¡ä»¶å¹¶å¼•å¯¼æ‚¨å®Œæˆéƒ¨ç½²ã€‚




