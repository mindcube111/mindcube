# ğŸš¨ å…³é”®é—®é¢˜ - æœåŠ¡å™¨ç«¯è¿æ¥å…³é—­

## ğŸ“Š å½“å‰çŠ¶æ€

ä»ä½ çš„æˆªå›¾æˆ‘çœ‹åˆ°ï¼š
- âœ… **"Disable cache" å·²å‹¾é€‰** - æµè§ˆå™¨ç¼“å­˜é—®é¢˜å·²è§£å†³
- âŒ **è¯·æ±‚ä»ç„¶å¤±è´¥** - æ˜¾ç¤º "Provisional headers are shown"
- âŒ **Response Headers (0)** - æ²¡æœ‰æ”¶åˆ°æœåŠ¡å™¨å“åº”
- âš ï¸ **æ–°çš„éƒ¨ç½² URL**: `22f53afc.mindcube.pages.dev`

**è¿™è¯´æ˜é—®é¢˜åœ¨æœåŠ¡å™¨ç«¯ï¼Œå¯èƒ½æ˜¯ Middleware å¯¼è‡´è¿æ¥å…³é—­ã€‚**

---

## ğŸ” é—®é¢˜åˆ†æ

### å¯èƒ½çš„åŸå› 

1. **Middleware ä»£ç é”™è¯¯**
   - Middleware å¯èƒ½æœ‰é”™è¯¯å¯¼è‡´è¿æ¥åœ¨å»ºç«‹å‰å°±å…³é—­
   - `dist/functions/_middleware.js` å¯èƒ½è¿˜æ˜¯æ—§ç‰ˆæœ¬

2. **æ„å»ºè„šæœ¬é—®é¢˜**
   - `copy-functions.js` å¯èƒ½æ²¡æœ‰æ­£ç¡®å¤åˆ¶æ–°çš„ Middleware
   - æˆ–è€…æ„å»ºæ—¶æ²¡æœ‰è¿è¡Œ copy-functions

3. **Cloudflare Pages éƒ¨ç½²é—®é¢˜**
   - éƒ¨ç½²å¯èƒ½ä½¿ç”¨äº†æ—§ç‰ˆæœ¬çš„ Middleware
   - æˆ–è€… Middleware æ ¹æœ¬æ²¡æœ‰è¢«éƒ¨ç½²

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ­¥éª¤ 1ï¼šç¡®ä¿ dist/functions/_middleware.js æ˜¯æœ€æ–°ç‰ˆæœ¬

**æ£€æŸ¥ dist ç›®å½•ä¸­çš„ Middleware æ˜¯å¦å·²æ›´æ–°ï¼š**

æˆ‘å·²ç»ç®€åŒ–äº† `functions/_middleware.js`ï¼Œä½†éœ€è¦ç¡®ä¿å®ƒè¢«å¤åˆ¶åˆ° `dist` ç›®å½•ã€‚

---

### æ­¥éª¤ 2ï¼šé‡æ–°æ„å»ºé¡¹ç›®

**åœ¨ PowerShell ä¸­è¿è¡Œï¼š**

```powershell
npm run build
```

è¿™ä¼šï¼š
- ç¼–è¯‘ TypeScript
- æ„å»º Vite é¡¹ç›®
- **è¿è¡Œ `copy-functions` è„šæœ¬ï¼Œå¤åˆ¶æœ€æ–°çš„ Middleware åˆ° dist**

---

### æ­¥éª¤ 3ï¼šæ£€æŸ¥ dist/functions/_middleware.js

**ç¡®è®¤ dist ç›®å½•ä¸­çš„ Middleware æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼š**

æ„å»ºå®Œæˆåï¼Œæ£€æŸ¥ `dist/functions/_middleware.js` æ–‡ä»¶çš„å†…å®¹ï¼Œåº”è¯¥æ˜¯ç®€åŒ–åçš„ç‰ˆæœ¬ã€‚

---

### æ­¥éª¤ 4ï¼šæäº¤å¹¶æ¨é€

```powershell
git add .
git commit -m "ä¿®å¤æœåŠ¡å™¨ç«¯è¿æ¥å…³é—­ - ä½¿ç”¨ç®€åŒ–ç‰ˆ Middleware"
git push origin main
```

---

### æ­¥éª¤ 5ï¼šç­‰å¾… Cloudflare Pages éƒ¨ç½²

æ¨é€åï¼Œç­‰å¾… Cloudflare Pages è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²ï¼ˆ2-3 åˆ†é’Ÿï¼‰ã€‚

---

## ğŸ” å¦‚æœè¿˜æ˜¯ä¸è¡Œ

### æ£€æŸ¥ Cloudflare Pages éƒ¨ç½²çŠ¶æ€

**è¯·å‘Šè¯‰æˆ‘ï¼š**

1. **è¿›å…¥ Cloudflare Dashboard**
   - https://dash.cloudflare.com/
   - è¿›å…¥ä½ çš„ Pages é¡¹ç›®

2. **æŸ¥çœ‹æœ€æ–°çš„éƒ¨ç½²**
   - ç‚¹å‡» "Deployments" æ ‡ç­¾
   - **æœ€æ–°çš„éƒ¨ç½²çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Ÿ**
   - âœ… Successï¼ˆæˆåŠŸï¼‰
   - âŒ Failedï¼ˆå¤±è´¥ï¼‰

3. **å¦‚æœéƒ¨ç½²æˆåŠŸï¼š**
   - æŸ¥çœ‹éƒ¨ç½²è¯¦æƒ…
   - æ£€æŸ¥ "Functions" éƒ¨åˆ†
   - **Middleware æ˜¯å¦è¢«è¯†åˆ«ï¼Ÿ**

4. **å¦‚æœéƒ¨ç½²å¤±è´¥ï¼š**
   - æŸ¥çœ‹æ„å»ºæ—¥å¿—
   - **å‘Šè¯‰æˆ‘å…·ä½“çš„é”™è¯¯ä¿¡æ¯**

---

## ğŸ’¡ ä¸´æ—¶è§£å†³æ–¹æ¡ˆ

**å¦‚æœ Middleware ä¸€ç›´æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æš‚æ—¶ç§»é™¤å®ƒï¼š**

1. **åˆ é™¤æˆ–é‡å‘½å `functions/_middleware.js`**
2. **ä½¿ç”¨ `public/_redirects` æ–‡ä»¶ä½œä¸ºå¤‡ç”¨**
3. **é‡æ–°æ„å»ºå’Œéƒ¨ç½²**

ä½†é¦–å…ˆè®©æˆ‘ä»¬å°è¯•ä¿®å¤ Middlewareã€‚

---

## ğŸ¯ ç°åœ¨è¯·æ‰§è¡Œ

1. **è¿è¡Œ `npm run build`**
2. **æ£€æŸ¥ `dist/functions/_middleware.js` æ˜¯å¦æ˜¯æœ€æ–°ç‰ˆæœ¬**
3. **æäº¤å¹¶æ¨é€ä»£ç **
4. **ç­‰å¾… Cloudflare Pages éƒ¨ç½²**
5. **å‘Šè¯‰æˆ‘ç»“æœ**

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·å‘Šè¯‰æˆ‘ Cloudflare Pages çš„éƒ¨ç½²çŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯ï¼

